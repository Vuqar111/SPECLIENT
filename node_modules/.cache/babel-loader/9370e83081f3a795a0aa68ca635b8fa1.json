{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\PC\\\\Desktop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{detailsUser,updateUser}from\"../actions/userActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{universities}from\"../data\";import{faculties}from\"../data\";import{USER_UPDATE_RESET}from\"../constants/userConstants\";export default function UserEditScreen(props){var userId=props.match.params.id;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),university=_useState6[0],setUniversity=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),faculty=_useState8[0],setFaculty=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isAdmin=_useState10[0],setIsAdmin=_useState10[1];var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userUpdate=useSelector(function(state){return state.userUpdate;});var loadingUpdate=userUpdate.loading,errorUpdate=userUpdate.error,successUpdate=userUpdate.success;var dispatch=useDispatch();useEffect(function(){if(successUpdate){dispatch({type:USER_UPDATE_RESET});props.history.push(\"/userlist\");}if(!user){dispatch(detailsUser(userId));}else{setName(user.name);setEmail(user.email);setUniversity(user.university);setFaculty(user.faculty);setIsAdmin(user.isAdmin);}},[dispatch,props.history,successUpdate,user,userId]);var submitHandler=function submitHandler(e){e.preventDefault();// dispatch update user\ndispatch(updateUser({_id:userId,name:name,email:email,university:university,faculty:faculty,isAdmin:isAdmin}));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"form\",onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Edit User \",name),loadingUpdate&&/*#__PURE__*/React.createElement(LoadingBox,null),errorUpdate&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorUpdate)),loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"editmainform\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",type:\"text\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{id:\"email\",type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-[10px]\"},/*#__PURE__*/React.createElement(\"label\",{className:\"mt-[15px]\",htmlFor:\"university\"},\"University\"),/*#__PURE__*/React.createElement(\"select\",{type:\"text\",id:\"university\",className:\"p-[10px] \",placeholder:\"Enter University\",required:true,value:university,onChange:function onChange(e){return setUniversity(e.target.value);}},universities.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{value:item},item);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-[10px]\"},/*#__PURE__*/React.createElement(\"label\",{className:\"mt-[15px]\",htmlFor:\"faculty\"},\"Faculty\"),/*#__PURE__*/React.createElement(\"select\",{type:\"text\",id:\"faculty\",className:\"p-[10px] \",placeholder:\"Enter Faculty\",value:faculty,required:true,onChange:function onChange(e){return setFaculty(e.target.value);}},faculties.map(function(item){return/*#__PURE__*/React.createElement(\"option\",{value:item},item);}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"isAdmin\"},\"Is Admin\"),/*#__PURE__*/React.createElement(\"input\",{id:\"isAdmin\",type:\"checkbox\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"primary\"},\"Update\"))))));}","map":{"version":3,"sources":["C:/Users/PC/Desktop/frontend/src/screens/UserEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","detailsUser","updateUser","LoadingBox","MessageBox","universities","faculties","USER_UPDATE_RESET","UserEditScreen","props","userId","match","params","id","name","setName","email","setEmail","university","setUniversity","faculty","setFaculty","isAdmin","setIsAdmin","userDetails","state","loading","error","user","userUpdate","loadingUpdate","errorUpdate","successUpdate","success","dispatch","type","history","push","submitHandler","e","preventDefault","_id","target","value","map","item","checked"],"mappings":"4JAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,wBAAxC,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,YAAT,KAA6B,SAA7B,CACA,OAASC,SAAT,KAA0B,SAA1B,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CAEA,cAAe,SAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,CAC5C,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACE,KAAN,CAAYC,MAAZ,CAAmBC,EAAlC,CACA,cAAwBf,QAAQ,CAAC,EAAD,CAAhC,wCAAOgB,IAAP,eAAaC,OAAb,eACA,eAA0BjB,QAAQ,CAAC,EAAD,CAAlC,yCAAOkB,KAAP,eAAcC,QAAd,eACA,eAAoCnB,QAAQ,CAAC,EAAD,CAA5C,yCAAOoB,UAAP,eAAmBC,aAAnB,eACA,eAA8BrB,QAAQ,CAAC,EAAD,CAAtC,yCAAOsB,OAAP,eAAgBC,UAAhB,eACA,eAA8BvB,QAAQ,CAAC,KAAD,CAAtC,0CAAOwB,OAAP,gBAAgBC,UAAhB,gBAEA,GAAMC,CAAAA,WAAW,CAAGxB,WAAW,CAAC,SAACyB,KAAD,QAAWA,CAAAA,KAAK,CAACD,WAAjB,EAAD,CAA/B,CACA,GAAQE,CAAAA,OAAR,CAAiCF,WAAjC,CAAQE,OAAR,CAAiBC,KAAjB,CAAiCH,WAAjC,CAAiBG,KAAjB,CAAwBC,IAAxB,CAAiCJ,WAAjC,CAAwBI,IAAxB,CAEA,GAAMC,CAAAA,UAAU,CAAG7B,WAAW,CAAC,SAACyB,KAAD,QAAWA,CAAAA,KAAK,CAACI,UAAjB,EAAD,CAA9B,CACA,GACWC,CAAAA,aADX,CAIID,UAJJ,CACEH,OADF,CAESK,WAFT,CAIIF,UAJJ,CAEEF,KAFF,CAGWK,aAHX,CAIIH,UAJJ,CAGEI,OAHF,CAMA,GAAMC,CAAAA,QAAQ,CAAGnC,WAAW,EAA5B,CACAF,SAAS,CAAC,UAAM,CACd,GAAImC,aAAJ,CAAmB,CACjBE,QAAQ,CAAC,CAAEC,IAAI,CAAE5B,iBAAR,CAAD,CAAR,CACAE,KAAK,CAAC2B,OAAN,CAAcC,IAAd,CAAmB,WAAnB,EACD,CACD,GAAI,CAACT,IAAL,CAAW,CACTM,QAAQ,CAACjC,WAAW,CAACS,MAAD,CAAZ,CAAR,CACD,CAFD,IAEO,CACLK,OAAO,CAACa,IAAI,CAACd,IAAN,CAAP,CACAG,QAAQ,CAACW,IAAI,CAACZ,KAAN,CAAR,CACAG,aAAa,CAACS,IAAI,CAACV,UAAN,CAAb,CACAG,UAAU,CAACO,IAAI,CAACR,OAAN,CAAV,CACAG,UAAU,CAACK,IAAI,CAACN,OAAN,CAAV,CACD,CACF,CAdQ,CAcN,CAACY,QAAD,CAAWzB,KAAK,CAAC2B,OAAjB,CAA0BJ,aAA1B,CAAyCJ,IAAzC,CAA+ClB,MAA/C,CAdM,CAAT,CAgBA,GAAM4B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3BA,CAAC,CAACC,cAAF,GACA;AACAN,QAAQ,CACNhC,UAAU,CAAC,CAAEuC,GAAG,CAAE/B,MAAP,CAAeI,IAAI,CAAJA,IAAf,CAAqBE,KAAK,CAALA,KAArB,CAA4BE,UAAU,CAAVA,UAA5B,CAAwCE,OAAO,CAAPA,OAAxC,CAAiDE,OAAO,CAAPA,OAAjD,CAAD,CADJ,CAAR,CAGD,CAND,CASA,mBACE,4CACE,4BAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAEgB,aAAjC,eACE,4CACE,2CAAexB,IAAf,CADF,CAEGgB,aAAa,eAAI,oBAAC,UAAD,MAFpB,CAGGC,WAAW,eACV,oBAAC,UAAD,EAAY,OAAO,CAAC,QAApB,EAA8BA,WAA9B,CAJJ,CADF,CAQGL,OAAO,cACN,oBAAC,UAAD,MADM,CAEJC,KAAK,cACP,oBAAC,UAAD,EAAY,OAAO,CAAC,QAApB,EAA8BA,KAA9B,CADO,cAGP,qDACE,2BAAK,SAAS,CAAC,cAAf,eACE,4CACE,6BAAO,OAAO,CAAC,MAAf,SADF,cAEE,6BACE,EAAE,CAAC,MADL,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,YAHd,CAIE,KAAK,CAAEb,IAJT,CAKE,QAAQ,CAAE,kBAACyB,CAAD,QAAOxB,CAAAA,OAAO,CAACwB,CAAC,CAACG,MAAF,CAASC,KAAV,CAAd,EALZ,EAFF,CADF,cAWE,4CACE,6BAAO,OAAO,CAAC,OAAf,UADF,cAEE,6BACE,EAAE,CAAC,OADL,CAEE,IAAI,CAAC,OAFP,CAGE,WAAW,CAAC,aAHd,CAIE,KAAK,CAAE3B,KAJT,CAKE,QAAQ,CAAE,kBAACuB,CAAD,QAAOtB,CAAAA,QAAQ,CAACsB,CAAC,CAACG,MAAF,CAASC,KAAV,CAAf,EALZ,EAFF,CAXF,cAqBE,2BAAK,SAAS,CAAC,WAAf,eACE,6BAAO,SAAS,CAAC,WAAjB,CAA6B,OAAO,CAAC,YAArC,eADF,cAIE,8BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,YAFL,CAGE,SAAS,CAAC,WAHZ,CAIE,WAAW,CAAC,kBAJd,CAKE,QAAQ,KALV,CAME,KAAK,CAAEzB,UANT,CAOE,QAAQ,CAAE,kBAACqB,CAAD,QAAOpB,CAAAA,aAAa,CAACoB,CAAC,CAACG,MAAF,CAASC,KAAV,CAApB,EAPZ,EASGtC,YAAY,CAACuC,GAAb,CAAiB,SAACC,IAAD,CAAU,CAC1B,mBAAO,8BAAQ,KAAK,CAAEA,IAAf,EAAsBA,IAAtB,CAAP,CACD,CAFA,CATH,CAJF,CArBF,cAuCE,2BAAK,SAAS,CAAC,WAAf,eACE,6BAAO,SAAS,CAAC,WAAjB,CAA6B,OAAO,CAAC,SAArC,YADF,cAIE,8BACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,SAFL,CAGE,SAAS,CAAC,WAHZ,CAIE,WAAW,CAAC,eAJd,CAKE,KAAK,CAAEzB,OALT,CAME,QAAQ,KANV,CAOE,QAAQ,CAAE,kBAACmB,CAAD,QAAOlB,CAAAA,UAAU,CAACkB,CAAC,CAACG,MAAF,CAASC,KAAV,CAAjB,EAPZ,EASGrC,SAAS,CAACsC,GAAV,CAAc,SAACC,IAAD,CAAU,CACvB,mBAAO,8BAAQ,KAAK,CAAEA,IAAf,EAAsBA,IAAtB,CAAP,CACD,CAFA,CATH,CAJF,CAvCF,cAyDE,4CACE,6BAAO,OAAO,CAAC,SAAf,aADF,cAEE,6BACE,EAAE,CAAC,SADL,CAEE,IAAI,CAAC,UAFP,CAGE,OAAO,CAAEvB,OAHX,CAIE,QAAQ,CAAE,kBAACiB,CAAD,QAAOhB,CAAAA,UAAU,CAACgB,CAAC,CAACG,MAAF,CAASI,OAAV,CAAjB,EAJZ,EAFF,CAzDF,cAkEE,4CACE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,SAAhC,WADF,CAlEF,CADF,CAbJ,CADF,CADF,CA6FD","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { detailsUser, updateUser } from \"../actions/userActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport { universities } from \"../data\";\nimport { faculties } from \"../data\";\nimport { USER_UPDATE_RESET } from \"../constants/userConstants\";\n\nexport default function UserEditScreen(props) {\n  const userId = props.match.params.id;\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [university, setUniversity] = useState(\"\");\n  const [faculty, setFaculty] = useState(\"\");\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const userDetails = useSelector((state) => state.userDetails);\n  const { loading, error, user } = userDetails;\n\n  const userUpdate = useSelector((state) => state.userUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = userUpdate;\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({ type: USER_UPDATE_RESET });\n      props.history.push(\"/userlist\");\n    }\n    if (!user) {\n      dispatch(detailsUser(userId));\n    } else {\n      setName(user.name);\n      setEmail(user.email);\n      setUniversity(user.university);\n      setFaculty(user.faculty);\n      setIsAdmin(user.isAdmin);\n    }\n  }, [dispatch, props.history, successUpdate, user, userId]);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    // dispatch update user\n    dispatch(\n      updateUser({ _id: userId, name, email, university, faculty, isAdmin })\n    );\n  };\n\n\n  return (\n    <div>\n      <form className=\"form\" onSubmit={submitHandler}>\n        <div>\n          <h1>Edit User {name}</h1>\n          {loadingUpdate && <LoadingBox></LoadingBox>}\n          {errorUpdate && (\n            <MessageBox variant=\"danger\">{errorUpdate}</MessageBox>\n          )}\n        </div>\n        {loading ? (\n          <LoadingBox />\n        ) : error ? (\n          <MessageBox variant=\"danger\">{error}</MessageBox>\n        ) : (\n          <>\n            <div className=\"editmainform\">\n              <div>\n                <label htmlFor=\"name\">Name</label>\n                <input\n                  id=\"name\"\n                  type=\"text\"\n                  placeholder=\"Enter name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                ></input>\n              </div>\n              <div>\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"Enter email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                ></input>\n              </div>\n              <div className=\"mt-[10px]\">\n                <label className=\"mt-[15px]\" htmlFor=\"university\">\n                  University\n                </label>\n                <select\n                  type=\"text\"\n                  id=\"university\"\n                  className=\"p-[10px] \"\n                  placeholder=\"Enter University\"\n                  required\n                  value={university}\n                  onChange={(e) => setUniversity(e.target.value)}\n                >\n                  {universities.map((item) => {\n                    return <option value={item}>{item}</option>;\n                  })}\n                </select>\n              </div>\n              <div className=\"mt-[10px]\">\n                <label className=\"mt-[15px]\" htmlFor=\"faculty\">\n                  Faculty\n                </label>\n                <select\n                  type=\"text\"\n                  id=\"faculty\"\n                  className=\"p-[10px] \"\n                  placeholder=\"Enter Faculty\"\n                  value={faculty}\n                  required\n                  onChange={(e) => setFaculty(e.target.value)}\n                >\n                  {faculties.map((item) => {\n                    return <option value={item}>{item}</option>;\n                  })}\n                </select>\n              </div>\n              <div>\n                <label htmlFor=\"isAdmin\">Is Admin</label>\n                <input\n                  id=\"isAdmin\"\n                  type=\"checkbox\"\n                  checked={isAdmin}\n                  onChange={(e) => setIsAdmin(e.target.checked)}\n                ></input>\n              </div>\n              <div>\n                <button type=\"submit\" className=\"primary\">\n                  Update\n                </button>\n              </div>\n            </div>\n          </>\n        )}\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}